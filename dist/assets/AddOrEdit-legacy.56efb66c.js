System.register(["./index-legacy.d914b7f0.js","./FolderTree-legacy.e8ec1da3.js","./index-legacy.d1f4369b.js"],(function(e){"use strict";var r,n,t,a,s,l,i,d,u,c,o,g,p,h,m,f,b,w,y,x,$,I;return{setters:[e=>{r=e.a,n=e.b,t=e.cj,a=e.aW,s=e.b9,l=e.h,i=e.a4,d=e.bP,u=e.S,c=e.ag,o=e.bA,g=e.bn,p=e.I,h=e.bQ,m=e.G,f=e.aG,b=e.ch,w=e.C,y=e.ba,x=e.n,$=e.a8},e=>{I=e.a},()=>{}],execute:function(){const _=e=>{const n=r();return l(o,{display:"inline-flex",flexDirection:"row",alignItems:"center",gap:"$2",rounded:"$md",shadow:"$md",p:"$2",w:"fit-content",get children(){return[l(g,{mb:"0",get children(){return n(`users.permissions.${e.name}`)}}),l(b,{get checked(){return e.can},onChange:()=>e.onChange(!e.can)})]}})};e("default",(()=>{const e=r(),{params:v,back:C}=n(),{id:k}=v,[j,q]=t({id:0,username:"",password:"",base_path:"",role:0,permission:0,disabled:!1,sso_id:""}),[D,S]=a((()=>s.get(`/admin/user/get?id=${k}`)));k&&(async()=>{const e=await S();y(e,q)})();const[T,F]=a((()=>s.post("/admin/user/"+(k?"update":"create"),j)));return l($,{get loading(){return D()},get children(){return l(i,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[l(d,{get children(){return e("global."+(k?"edit":"add"))}}),l(u,{get when(){return!c.is_guest(j)},get children(){return[l(o,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[l(g,{for:"username",display:"flex",alignItems:"center",get children(){return e("users.username")}}),l(p,{id:"username",get value(){return j.username},onInput:e=>q("username",e.currentTarget.value)})]}}),l(o,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[l(g,{for:"password",display:"flex",alignItems:"center",get children(){return e("users.password")}}),l(p,{id:"password",type:"password",placeholder:"********",get value(){return j.password},onInput:e=>q("password",e.currentTarget.value)})]}})]}}),l(o,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[l(g,{for:"base_path",display:"flex",alignItems:"center",get children(){return e("users.base_path")}}),l(I,{id:"base_path",get value(){return j.base_path},onChange:e=>q("base_path",e),onlyFolder:!0})]}}),l(o,{w:"$full",required:!0,get children(){return[l(g,{display:"flex",alignItems:"center",get children(){return e("users.permission")}}),l(h,{w:"$full",wrap:"wrap",gap:"$2",get children(){return l(m,{each:f,children:(e,r)=>l(_,{name:e,get can(){return c.can(j,r())},onChange:e=>{q("permission",e?j.permission|=1<<r():j.permission&=~(1<<r()))}})})}})]}}),l(o,{w:"fit-content",display:"flex",get children(){return l(b,{css:{whiteSpace:"nowrap"},id:"disabled",onChange:e=>q("disabled",e.currentTarget.checked),color:"$neutral10",fontSize:"$sm",get checked(){return j.disabled},get children(){return e("users.disabled")}})}}),l(w,{get loading(){return T()},onClick:async()=>{const r=await F();y(r,(()=>{x.success(e("global.save_success")),C()}))},get children(){return e("global."+(k?"save":"add"))}})]}})}})}))}}}));
