System.register(["./index-legacy.d914b7f0.js"],(function(e){"use strict";var r,t,n,a,u,s,c,i,o,g,l,d,h,f,b,y,p,v,x,_,m;return{setters:[e=>{r=e.b,t=e.aW,n=e.b9,a=e.a,u=e.m,s=e.h,c=e.S,i=e.a4,o=e.bP,g=e.au,l=e.az,d=e.b5,h=e.al,f=e.I,b=e.C,y=e.a8,p=e.ah,v=e.n,x=e.ba,_=e.aY,m=e.c_}],execute:function(){e("default",(()=>{const{back:e}=r(),[w,$]=t((()=>n.post("/auth/2fa/generate"))),k=a(),[I,S]=u(),[q,z]=u("");(async()=>{if(p().otp)return v.warning(k("users.2fa_already_enabled")),void e();const r=await $();x(r,S)})();const[C,W]=t((()=>n.post("/auth/2fa/verify",{code:q(),secret:I()?.secret}))),j=async()=>{const r=await W();_(r,(()=>{m({...p(),otp:!0}),e()}))};return s(y,{get loading(){return w()},get children(){return s(c,{get when(){return I()},get children(){return s(i,{spacing:"$2",alignItems:"start",get children(){return[s(o,{get children(){return k("users.scan_qr")}}),s(g,{boxSize:"$xs",rounded:"$lg",get src(){return I()?.qr}}),s(o,{get children(){return[l((()=>k("users.or_manual"))),":"," ",s(d,{get color(){return h()},get children(){return I()?.secret}})]}}),s(f,{maxW:"$xs",get placeholder(){return k("users.input_code")},get value(){return q()},onInput:e=>z(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&j()}}),s(b,{get loading(){return C()},onClick:j,get children(){return k("users.verify")}})]}})}})}})}))}}}));
